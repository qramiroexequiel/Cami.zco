{% extends 'dashboard/base.html' %}

{% block title %}Productos - Panel de Administración{% endblock %}

{% block dashboard_content %}
<div class="mb-6 md:mb-8 flex justify-between items-center animate-fade-up">
    <h1 class="text-3xl font-bold" style="color: #E5E7EB;">Productos</h1>
    <a href="{% url 'dashboard:producto_crear' %}" class="btn-primary">
        + Crear producto
    </a>
</div>

<div class="card overflow-hidden animate-fade-up animate-stagger-1">
    <div class="overflow-x-auto">
        <table class="min-w-full" style="border-collapse: separate; border-spacing: 0;">
            <thead>
                <tr style="background: rgba(236, 72, 153, 0.08); border-bottom: 2px solid rgba(229, 231, 235, 0.1);">
                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider" style="color: #E5E7EB;">Imagen</th>
                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider" style="color: #E5E7EB;">Nombre</th>
                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider" style="color: #E5E7EB;">Precio</th>
                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider" style="color: #E5E7EB;">Estado</th>
                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider" style="color: #E5E7EB;">Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for producto in productos %}
                <tr class="hover:bg-[rgba(236,72,153,0.08)] transition-colors duration-150" style="border-bottom: 1px solid rgba(229, 231, 235, 0.08);">
                    <td class="px-6 py-4 whitespace-nowrap">
                        {% if producto.imagenes.first %}
                        <img src="{{ producto.imagenes.first.imagen.url }}" alt="{{ producto.titulo }}" class="w-16 h-16 object-cover rounded">
                        {% else %}
                        <div class="w-16 h-16 rounded flex items-center justify-center text-xs" style="background-color: #020617; color: #9CA3AF;">Sin imagen</div>
                        {% endif %}
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium" style="color: #E5E7EB;">{{ producto.titulo }}</div>
                        <div class="text-sm" style="color: #9CA3AF;">{{ producto.descripcion|truncatewords:10 }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold bg-gradient-to-r from-[#F97316] via-[#EC4899] to-[#8B5CF6] bg-clip-text text-transparent">{{ producto.get_precio_display }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <form method="post" action="{% url 'dashboard:producto_toggle_activo' producto.id %}" class="inline">
                            {% csrf_token %}
                            <button type="submit" class="px-3 py-1.5 text-xs font-semibold rounded-full transition-all duration-200
                                {% if producto.activo %}bg-green-500/25 text-green-300 border border-green-500/30{% else %}bg-gray-500/25 text-gray-400 border border-gray-500/30{% endif %}">
                                {% if producto.activo %}Activo{% else %}Inactivo{% endif %}
                            </button>
                        </form>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <a href="{% url 'dashboard:producto_editar' producto.id %}" class="hover-glow transition-all duration-200" style="color: #EC4899;">
                            Editar
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="px-6 py-8 text-center" style="color: #9CA3AF;">
                        No hay productos aún. <a href="{% url 'dashboard:producto_crear' %}" class="hover-glow" style="color: #EC4899;">Crear el primero</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

